This outlines how our email templates work in sync with Supabase authentication and user interactions.

ðŸ”¹ 1. User Initiates an Action
A user performs an action in the app that triggers an authentication email:

Signup Confirmation â†’ New user registers
Magic Link Login â†’ Passwordless login request
Reset Password â†’ User forgets password
Email Change Confirmation â†’ User updates email
User Invitation â†’ Admin invites a new user
Reauthentication â†’ User is required to verify identity
Supabase generates a secure token and sends an email with a link containing the token.

ðŸ”¹ 2. Supabase Sends Email With Authentication Link
The email contains:

A well-designed HTML template with branding
A call-to-action button (e.g., "Confirm Email", "Reset Password")
A secure token inside the URL (e.g., ?token=XYZ)
âœ… Email Template Changes:
Each email now includes a modern, visually appealing design that aligns with RoshLingua's brand.

âœ… Updated Email Buttons now redirect to correct pages:

perl
Copy
Edit
https://roshlingua.vercel.app/magic-login?token={{ .ConfirmationURL }}
https://roshlingua.vercel.app/reset-password?token={{ .ConfirmationURL }}
https://roshlingua.vercel.app/confirm-email?token={{ .ConfirmationURL }}
ðŸ”¹ 3. User Clicks the Link
The user clicks the email link and is taken to the corresponding page:

/magic-login â†’ Logs user in automatically
/reset-password â†’ Shows form to set a new password
/confirm-email â†’ Shows old & new email and updates the account
The page: âœ… Extracts the token from the URL
âœ… Uses Supabase Auth API to verify the token
âœ… Performs the required action (e.g., login, reset password)
âœ… Redirects user to dashboard or shows an error if invalid

ðŸ”¹ 4. Authentication Completed & Final Redirect
Once the authentication action is successful, the user is redirected:

https://roshlingua.vercel.app/dashboard (for logged-in users)
https://roshlingua.vercel.app/auth-error (if token is invalid)
Security Measures: âœ… Pages are protected so only valid tokens work.
âœ… Expired tokens show an error instead of allowing unauthorized access.