 Issues to Fix:

1ï¸âƒ£ "406 Not Acceptable" Error in user_likes API Call

The API request to user_likes is failing with a 406 HTTP error.
This happens when the request header does not accept JSON or when the response is empty but expected as JSON.
âœ… Expected Fix:

Ensure the request has the correct Accept header:
json
Copy
Edit
{ "Accept": "application/json" }
Modify the request to handle empty responses properly.
If checking whether a user has already liked another user, use .maybeSingle() instead of .single() in Supabase queries.
ðŸ“Œ Fix for user_likes Fetch Request in JavaScript:

javascript
Copy
Edit
const checkUserLike = async (userId, likedUserId) => {
  const { data, error } = await supabase
    .from("user_likes")
    .select("*")
    .eq("user_id", userId)
    .eq("liked_user_id", likedUserId)
    .maybeSingle();  // âœ… Prevents 406 error if no data exists

  if (error) console.error("Error fetching like status:", error);
  return data;
};
2ï¸âƒ£ "406 Not Acceptable" Error in chats API Call

The chat request fails because no chat exists between the users, but the query is expecting at least one row.
Error: "JSON object requested, multiple (or no) rows returned" (PGRST116)
âœ… Expected Fix:

Use .maybeSingle() instead of .single() when fetching chat details.
Ensure a chat is created if none exists before trying to fetch it.
ðŸ“Œ Fix for getChatDetails Function in chatService.ts:

javascript
Copy
Edit
const getChatDetails = async (chatId) => {
  const { data, error } = await supabase
    .from("chats")
    .select(
      `*, messages:chat_messages(*),
      user1:users!chats_user1_id_fkey(id, username, profile_picture, is_online, last_active),
      user2:users!chats_user2_id_fkey(id, username, profile_picture, is_online, last_active)`
    )
    .eq("id", chatId)
    .maybeSingle();  // âœ… Prevents 406 error

  if (error) console.error("Error in getChatDetails:", error);
  return data;
};
3ï¸âƒ£ Fix Navigation & User List Issues

Ensure navigation remains smooth on mobile when switching between the community list and chat.
Show "No chat found" instead of an error message when no conversation exists.
Add missing age details in the Community List.
ðŸ“Œ Fix for Displaying Users' Age in Community List:

jsx
Copy
Edit
{users.map(user => (
  <div key={user.id} className="user-card">
    <img src={user.profile_picture} alt="Profile" />
    <h3>{user.username}, {user.age}</h3>  {/* âœ… Show age */}
  </div>
))}
âœ… Expected Outcome After Fixes:

No more 406 errors in user_likes or chats API calls.
Clicking "Start Conversation" properly creates or retrieves a chat.
Community List correctly displays user age.
Chat navigation works smoothly on mobile.
