**Replit Guide for Real-Time Chat System**

---

### **âœ… Remaining Tasks for Full Real-Time Chat System**

#### **1ï¸âƒ£ Frontend Integration**

ğŸ”¹ **Connect the Database Logic to the UI**
- Ensure the chat UI components fetch, send, and display messages properly.
- The chat input field should support text, images, emojis, and file uploads.
- Implement API calls to Supabase to retrieve chat messages.

ğŸ”¹ **Real-Time Message Updates**
- Use `listenForNewMessages(chatId, callback)` to update messages in real time.
- Ensure new messages appear instantly without refreshing the page.

ğŸ”¹ **Read Receipts (Seen Messages)**
- Call `markMessageAsSeen(messageId, userId)` when a message is opened.
- Display **âœ“âœ“ (double tick)** for seen messages.

ğŸ”¹ **New Message Notifications**
- Display alert badges or sound alerts when new messages arrive.

---

#### **2ï¸âƒ£ User Presence & Status**

ğŸ”¹ **Online/Offline Tracking**
- Call `setUserOnline(userId)` when a user opens chat.
- Call `setUserOffline(userId)` when a user closes chat or logs out.
- Use `listenForUserStatus(callback)` to update the UI when users go online/offline.

ğŸ”¹ **Last Seen Implementation**
- Display "Last seen at [time]" for offline users.
- Ensure it updates when a user goes offline.

---

#### **3ï¸âƒ£ Chat Room Functionality**

ğŸ”¹ **Allow Users to Create New Chats**
- UI should include a "New Chat" button to start conversations.
- Insert a new row in the `chats` table when a new chat is created.

ğŸ”¹ **Show Active Chats**
- Fetch all chats where `user_id` is involved.
- Display the chat list in the sidebar.

ğŸ”¹ **Lazy Loading Messages**
- Fetch only the latest **20 messages** when opening a chat.
- Implement **scroll-to-load** older messages.

---

#### **4ï¸âƒ£ Media Uploads (Images, Files, Emojis)**

ğŸ”¹ **Enable Image/File Upload**
- Store images/files in **Supabase Storage**.
- Modify `sendMessage()` to support media uploads.

ğŸ”¹ **Emoji Picker**
- Use an emoji picker component in the UI.
- Ensure emojis are properly displayed in messages.

---

#### **5ï¸âƒ£ Final Testing & Deployment**

ğŸ”¹ **Test Everything:**
- âœ… Real-time messaging
- âœ… Online/offline tracking
- âœ… Last seen status
- âœ… Message notifications
- âœ… Read receipts
- âœ… File & emoji support
- âœ… UI responsiveness

ğŸ”¹ **Deploy on Replit & Ensure No Syntax Errors**
- Run and verify that all features work smoothly.

---

### **ğŸ“Œ Replit Execution Notes**

ğŸ’¡ **Important Guidelines for Replit Implementation:**
1ï¸âƒ£ **DO NOT modify the database schema or break existing imports**.
2ï¸âƒ£ **UI must already be availableâ€”connect the backend only**.
3ï¸âƒ£ **Ensure real-time events are correctly handled**.
4ï¸âƒ£ **No unnecessary logs or debug statements in production**.

ğŸš€ Once done, let me know if you need extra features!

